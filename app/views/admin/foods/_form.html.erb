<%= form_with(model: [:admin, food], local: true, id: "admin_food_form", class: "uk-form-horizontal uk-margin-medium" ) do |form| %>

  <% if food.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(food.errors.count, "error") %> prohibited this food from being saved:</h2>
      <ul>
        <% food.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="uk-margin">
    <label class="uk-form-label" for="form-horizontal-text">Nombre</label>
    <div class="uk-form-controls">
      <%= form.text_field :name, class:"uk-input" %>
    </div>
  </div>
  <div class="uk-margin">
    <label class="uk-form-label" for="form-horizontal-text">Descripci√≥n</label>
    <div class="uk-form-controls">
      <%= form.text_area :description, class:"uk-input" %>
    </div>
  </div>

  <hr class="uk-divider-icon">

  <% Food::COMPONENT_GROUPS.each do |key, name| %>
    <% if @food.food_nutrients.by_component_group(key).present? %>
      <dl class="uk-description-list">
        <dt><strong><%= name %></strong></dt>
      <% @food.food_nutrients.by_component_group(key).each do |fn| %>
        <dd>
          <div class="uk-grid-small uk-text-left" uk-grid>
            <div class="uk-width-expand uk-margin-small-top" uk-leader><%= fn&.nutrient&.name&.capitalize %></div>
            <%= form.fields_for fn do |f| %>
            <div uk-grid>
              <div class="uk-width-3-4 uk-margin"><%= f.text_field :quantity, class:"uk-input" %></div>
              <div class="uk-width-1-4 uk-margin-small-top"> <%="#{fn&.unit}"%></div>
            </div>
            <% end %>
          </div>
        </dd>
      <% end %>
      </dl>
    <% end %>
  <% end %>
  
<% end %>

