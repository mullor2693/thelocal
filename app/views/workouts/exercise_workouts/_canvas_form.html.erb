<button class="uk-offcanvas-close" type="button" uk-close></button>

<h3><%= exercise_workout.new_record? ? "AÃ±adir Ejercicio" : "Editar Ejercicio"%></h3>

<%= form_with(model: [@workout, exercise_workout], local: true) do |form| %>
  
  <div class="uk-margin">
    <%= form.collection_select(:exercise_id, Exercise.order(:name), :id, :name, {include_blank: 'Selecciona un ejercicio'},{ class: "uk-select" }) %>
  </div>

  <div class="uk-margin">
    <%= form.collection_select(:serie_type, ExerciseWorkout::TYPES, :first, :last, {include_blank: 'Selecciona el tipo de serie'},{ class: "uk-select" }) %>
  </div>

  <div class="uk-margin">
    <%= form.number_field :serie_reps, class: "uk-input", placeholder: "Repeticiones" %>
  </div>

  <div class="uk-margin">
    <%= form.number_field :serie_rest, class: "uk-input", placeholder: "Descanso (segundos)" %>
  </div>

  <% exercise_workout.series.each do |key,value| %>
    <ul class="uk-list uk-list-divider">
    <p><%= "Serie #{key.to_i+1}" %></p>
    <% value.each do |subkey,subvalue| %>
      <li>
        <%= form.label "#{subkey}" %>
        <%= form.number_field "series_#{key}_#{subkey}", value: subvalue, name:"exercise_workout[series][#{key}][#{subkey}]", class: "uk-width-1-2" %>
      </li>
    <% end %>
    </ul>
  <% end %>

  <div class="uk-margin">
    <%= form.text_area :notes, class: "uk-textarea", placeholder: "Notas" %>
  </div>

  <div class="uk-margin">
    <%= form.submit "Guardar", class:"uk-button uk-button-default" %>
  </div>

<% end %>
